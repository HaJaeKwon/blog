# TDD, Refactoring, Clean Code 8기 수업

* full time online 수업 진행
  * 2020-05-09 ~. 020-07-04
* with javajigi 박재성님



## 0강 시작하며

#### 심리적 안정감이란?

회사 혹은 교육에서 어떠한 의견을 제시해도 불이익을 받거나, 팀원간에 불만에 생기지 않을거라고 믿는 조직, 교육 환경

심리적 안정감이 있어야 업무, 교육이 모입할 수 있고 자유로운 의견 교환이 가능해 최고의 효율을 낼 수 있다.



## 자동차 경주 게임 피드백

* 네이밍(이름 짓기)
  * 객체지향 생활 체조 규칙 5: 줄여쓰지 않는다.
  * (효과적인 이름짓기)[https://remotty.github.io/blog/2014/03/01/hyogwajeogin-ireumjisgi/]
    * 변수 이름의 길이는 평균 10~16
    * 계산된 값을 보관하는 변수 (Total, Sub, Average, Max, Min, String ....)
      * 이름의 끝에 붙이는게 좋다
      * Num 의 경우 예외, Counst, Index 로 바꿔서 쓰는게 좋다
* final
  * 요즘 언어들은 final 변수를 지원한다. var / val
    * java 11 부터도 지원된다
  * 조금이라도 버그 가능성을 낮추고 안정적인 코드를 만들기 위해서는 immutable object 를 만드는게 중요하다
* 핵심 비즈니스 로직에서 getter, setter 를 쓰지 마라
  * DTO 에서는 써도 된다
* 테스트 가능한 코드와 테스트하기 힘든 부분을 분리
  * 랜덤값을 Car 클래스 내부에서 생성하면 테스트하기 힘들다.
  * 이럴때는 분리, 인터페이스로 추출하면 테스트 가능해진다
  * [DateMessageProvider에 대한 정리 및 느낀 점](https://www.slipp.net/wiki/pages/viewpage.action?pageId=6160426)
* getter. setter
  * 상태 데이터를 get하지 말고 메시지를 보내라
    * 객체의 데이터를 꺼내 로직을 구현하면 중복 코드가 발생한다
    * 객체에 메시지를 보내 상태 데이터를 가지는 객체가 일하도록 하라
  * 객체지향 생활 체조의 모든 원칙은 `핵심 비즈니즈 로직`을 위한 것이다



## 2강 로또 - TDD

* 회사가 요구하는 역량은?
  * 다른 사람이 읽기 좋은 클린코드
  * 다른 사람들과 원할히 소통하고, 팀워크를 만들어갈 수 있는 협업 능력
  * 자기 주도적으로 문제를 해결하는 능력
* 정적 팩토리 메서드
  * 생성자가 2개 이상이 되면 생성자로 의도를 드러내기 힘들다
    * 어떤 생성자를 사용해야 하는지 늘 document를 봐야 한다
* TDD란?
  * TFD + 리팩토링
  * 프로덕션 코드를 추가할 때 마다 리팩토링이 이뤄줘야 한다. 한번에 몰아서 하겠다는 것이 아니다
  * 반드시 실패하는 테스트 코드가 있어야만 프로덕션 코드를 수정할 수 있다
* 과제 수행
  * 구현할 기능 목록 작성하기
  * 로또 기능 구현할 때는 일단 구현을 먼저 해보고, 테스트해볼 수 있는 가장 작은 단위 (의존성이 없는 노드, 유틸성 메소드를)를 TDD로 구현한다
  * 구현할 기능 목록을 먼저 작성하고, 커밋
  * 특정 기능을 골라서, 실패하는 테스트를 작성한다 커밋
  * 프로덕션 코드를 작성한다. 커밋
  * 리팩토링 진행. 커밋
  * 리팩토링 하면서 테스트해야할 메소드, 클래스가 추가로 생긴다면 테스트를 추가. 커밋
  * 지켜야할 요구사항을 다 지키고 있는지 확인
  * 다음 기능을 구현....







현재 이 클래스는 상태를 가지고 있지 않고, 행위만 가지고 있네요. 그렇다면 유틸리티 클래스인지, 객체인지 명확하게 하는 편이 좋을 것 같습니다.

다만 모든 생성자와 정적 팩토리 메소드는 주 생성자를 리턴하고, 검증 코드는 주 생성자에서만 이루어지게 하면, 검증코드 반복도 줄일 수 있다는 점을 기억해주세요:)







